{% extends "base.html" %}

{% block title %}{{ profile_user['username'] }}のプロフィール - 大喜利アプリ{% endblock %}

{% block content %}
<h1>👤 {{ profile_user['username'] }}のプロフィール</h1>

<div class="card">
    <div style="display: flex; gap: 30px; align-items: start; flex-wrap: wrap;">
        <div style="text-align: center;">
            <img src="{{ url_for('static', filename='uploads/' + profile_user['image']) }}" 
                 alt="プロフィール画像" 
                 style="width: 150px; height: 150px; border-radius: 50%; object-fit: cover; border: 4px solid #667eea;"
                 onerror="this.src='{{ url_for('static', filename='uploads/default.png') }}'">
        </div>
        
        <div style="flex: 1;">
            <h2 style="margin-bottom: 10px;">{{ profile_user['username'] }}</h2>
            <p style="color: #666; margin-bottom: 20px;">{{ profile_user['bio'] or 'よろしくお願いします！' }}</p>
            
            {% if profile_user['show_stats'] %}
            <div style="display: flex; gap: 20px; margin-bottom: 20px; flex-wrap: wrap;">
                <div>
                    <strong style="color: #667eea;">総試合数:</strong> {{ profile_user['battles'] }}
                </div>
                <div>
                    <strong style="color: #28a745;">勝利回数:</strong> {{ profile_user['wins'] }}
                </div>
                <div>
                    <strong style="color: #ffc107;">獲得ポイント:</strong> {{ profile_user['total_points'] }}
                </div>
            </div>
            {% endif %}
            
            {% if profile_user['best_answer'] %}
            <div style="background: #f0f0f0; padding: 15px; border-radius: 10px; margin-top: 15px;">
                <strong style="color: #764ba2;">ベスト回答</strong>
                <p style="margin-top: 5px;"><strong>お題:</strong> {{ profile_user['best_answer_topic'] }}</p>
                <p style="margin-top: 5px; font-size: 1.1em;">{{ profile_user['best_answer'] }}</p>
            </div>
            {% endif %}
        </div>
    </div>
</div>

<div style="text-align: center; margin-top: 20px;">
    <a href="{{ url_for('users_list') }}" class="btn btn-secondary">ユーザー一覧に戻る</a>
</div>
{% endblock %}