{% extends "base.html" %}

{% block title %}ãƒã‚¤ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ - å¤§å–œåˆ©ã‚¢ãƒ—ãƒª{% endblock %}

{% block content %}
<h1>ğŸ‘¤ ãƒã‚¤ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ</h1>

<div class="card">
    <div style="display: flex; gap: 30px; align-items: start; flex-wrap: wrap;">
        <div style="text-align: center;">
            <img src="{{ url_for('static', filename='uploads/' + user['image']) }}" 
                 alt="ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»åƒ" 
                 style="width: 150px; height: 150px; border-radius: 50%; object-fit: cover; border: 4px solid #667eea;"
                 onerror="this.src='{{ url_for('static', filename='uploads/default.png') }}'">
        </div>
        
        <div style="flex: 1;">
            <h2 style="margin-bottom: 10px;">{{ user['username'] }}</h2>
            <p style="color: #666; margin-bottom: 20px;">{{ user['bio'] or 'è‡ªå·±ç´¹ä»‹ãŒã¾ã è¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“' }}</p>
            
            {% if user['show_stats'] %}
            <div style="display: flex; gap: 20px; margin-bottom: 20px; flex-wrap: wrap;">
                <div>
                    <strong style="color: #667eea;">ç·è©¦åˆæ•°:</strong> {{ user['battles'] }}
                </div>
                <div>
                    <strong style="color: #28a745;">å‹åˆ©å›æ•°:</strong> {{ user['wins'] }}
                </div>
                <div>
                    <strong style="color: #ffc107;">ç²å¾—ãƒã‚¤ãƒ³ãƒˆ:</strong> {{ user['total_points'] }}
                </div>
            </div>
            {% endif %}
            
            {% if user['best_answer'] %}
            <div style="background: #f0f0f0; padding: 15px; border-radius: 10px; margin-top: 15px;">
                <strong style="color: #764ba2;">ãƒ™ã‚¹ãƒˆå›ç­”</strong>
                <p style="margin-top: 5px;"><strong>ãŠé¡Œ:</strong> {{ user['best_answer_topic'] }}</p>
                <p style="margin-top: 5px; font-size: 1.1em;">{{ user['best_answer'] }}</p>
            </div>
            {% endif %}
        </div>
    </div>
</div>

<div class="card">
    <h2>ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç·¨é›†</h2>
    <form method="POST" action="{{ url_for('edit_account') }}" enctype="multipart/form-data">
        <label>ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»åƒ</label>
        <input type="file" name="image" accept="image/*" style="margin-bottom: 15px;">
        
        <label>è‡ªå·±ç´¹ä»‹</label>
        <textarea name="bio" rows="4" placeholder="è‡ªå·±ç´¹ä»‹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„">{{ user['bio'] }}</textarea>
        
        <label>
            <input type="checkbox" name="show_stats" {% if user['show_stats'] %}checked{% endif %}>
            æˆ¦ç¸¾ã‚’å…¬é–‹ã™ã‚‹
        </label>
        
        <h3 style="margin-top: 20px; color: #764ba2;">ãƒ™ã‚¹ãƒˆå›ç­”è¨­å®š</h3>
        
        <label>ãŠé¡Œ</label>
        <input type="text" name="best_answer_topic" value="{{ user['best_answer_topic'] }}" placeholder="ãŠé¡Œã‚’å…¥åŠ›">
        
        <label>å›ç­”</label>
        <textarea name="best_answer" rows="3" placeholder="ãƒ™ã‚¹ãƒˆå›ç­”ã‚’å…¥åŠ›">{{ user['best_answer'] }}</textarea>
        
        <button type="submit" class="btn">ä¿å­˜</button>
    </form>
</div>
{% endblock %}